---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import ServiceCard from "../../components/ServiceCard.astro";
import PartnerLogos from "../../components/PartnerLogos.astro";
import ContactForm from "../../components/ContactForm.astro";
import AIOptimizationBox from "../../components/AIOptimizationBox.astro";
import TeamCard from "../../components/TeamCard.astro";
import GeometricOptimizer from "../../components/GeometricOptimizer.astro";
import GradientGridBackground from "../../components/GradientGridBackground.astro";
import { useTranslations } from "../../utils/i18n";

const t = useTranslations("da");
const base = import.meta.env.BASE_URL === '/' ? '' : import.meta.env.BASE_URL;

// Service data in Danish
const services = [
  {
    number: "001",
    title: "Workshops & Bootcamps",
    description:
      "Få overblik og indsigt i potentialet ved AI teknologi",
    highlighted: false,
  },
  {
    number: "002",
    title: "Skræddersyede programmer",
    description: "Fra viden til konkrete use cases i jeres virksomhed",
    highlighted: false,
  },
  {
    number: "003",
    title: "Strategi & implementering",
    description:
      "Omsæt teknologi til konkrete resultater og værdi",
    highlighted: true,
  },
  {
    number: "004",
    title: "Produktudvikling",
    description: "Vi udvikler og bygger AI løsninger sammen med jer",
    highlighted: false,
  },
];
---

<BaseLayout 
  title="SAIBA - Vi omsætter ny teknologi til værdi for jeres virksomhed"
  description="SAIBA - Vi omsætter ny teknologi til værdi for jeres virksomhed"
  image="/og-image.jpg"
>
  <Header />

  <main>
    <!-- Hero Section with Video Background -->
    <section
      class="relative h-screen flex items-center justify-start overflow-hidden"
    >
      <!-- Background Video -->
      <div class="absolute inset-0 z-0">
        <video
          autoplay
          muted
          loop
          playsinline
          preload="auto"
          poster={`${base}/images/hero-poster.jpg`}
          class="absolute inset-0 w-full h-full object-cover"
          style="min-width: 100%; min-height: 100%;"
        >
          <source src={`${base}/videos/hero-video.mp4`} type="video/mp4" />
        </video>
        <!-- Dark overlay for better text readability -->
        <div class="absolute inset-0 bg-black/30 z-10"></div>
      </div>

      <!-- Hero Content -->
      <div
        class="relative z-10 mx-auto max-w-[1400px] px-3 xs:px-4 sm:px-6 md:px-8 lg:px-10 xl:px-12 2xl:px-16 w-full"
      >
        <div class="max-w-4xl pt-12 xs:pt-14 sm:pt-16 md:pt-18 lg:pt-20">
          <!-- Arrow indicator -->
          <div class="mb-3 animate-fade-in">
            <svg class="w-5 h-5 text-white/70" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </div>
          
          <!-- Subtitle -->
          <p class="text-white/90 text-lg sm:text-xl mb-6 animate-fade-in">
            Fra hverdagens rutiner til ekstraordinære superkræfter med AI for jeres medarbejdere
          </p>

          <!-- Main Title -->
          <h1
            class="text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-bold text-white mb-8 leading-tight animate-fade-in-up text-balance"
          >
            {t("hero.title")}
          </h1>

          <!-- CTA Button -->
          <div class="animate-fade-in-up" style="animation-delay: 0.3s;">
            <a
              href={`${base}/da#contact`}
              class="inline-flex items-center bg-white/10 backdrop-blur-sm text-white px-8 py-4 rounded-lg text-lg font-medium hover:bg-white/20 transition-all duration-300 border border-white/20"
            >
              {t("hero.cta")}
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="relative py-8 xs:py-10 sm:py-12 md:py-16 lg:py-20 xl:py-24 bg-gray-100 overflow-hidden">
      <!-- Subtle Grid Background -->
      <div class="absolute inset-0 opacity-50" style="mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 90%, transparent 100%);">
        <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="grid-services" width="40" height="40" patternUnits="userSpaceOnUse">
              <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(0,0,0,0.15)" stroke-width="1"/>
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#grid-services)" />
        </svg>
      </div>
      <div class="mx-auto max-w-7xl px-3 xs:px-4 sm:px-6 md:px-8 lg:px-10 xl:px-12 2xl:px-16">
        <div class="text-center mb-16">
          <h2
            class="text-3xl sm:text-4xl lg:text-5xl font-black text-gray-900 mb-6 leading-tight tracking-tight"
          >
            {t("services.title")}
          </h2>
          <p
            class="text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed"
          >
            {t("services.subtitle")}
          </p>
        </div>

        <div
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 justify-items-center"
        >
          {services.map((service) => <ServiceCard {...service} />)}
        </div>
      </div>
    </section>

    <!-- Process Optimization Section -->
    <section id="optimization" class="relative py-24 sm:py-28 lg:py-32 bg-gray-100 overflow-hidden">
      <div class="mx-auto max-w-7xl px-4 sm:px-8 lg:px-16">
        <div class="grid grid-cols-1 lg:grid-cols-8 gap-20 items-center">
          <div class="lg:col-span-3">
            <p class="text-lg text-gray-600 mb-6 font-medium">Mål og hvorfor AI kan forbedre jeres forretning</p>
            <h2 class="text-4xl sm:text-5xl lg:text-6xl font-black text-gray-900 mb-6 sm:mb-8 leading-tight">
              Optimér jeres<br class="hidden sm:block">
              <span class="sm:hidden">forretningsprocesser</span>
              <span class="hidden sm:inline">forretningsprocesser</span>
            </h2>
            <p class="text-xl text-gray-700 leading-relaxed">
              Optimér AI potentialer gennem målrettet analyse. Mål og vurder potentialer og identificer de bedste muligheder for jeres forretning og specifikke forretningsprocesser.
            </p>
          </div>
          <div class="lg:col-span-5 lg:pl-52">
            <GeometricOptimizer />
          </div>
        </div>
      </div>
    </section>

    <!-- Team Section -->
    <section id="team" class="py-16 sm:py-20 md:py-24 lg:py-32 xl:py-40 bg-[#0D1224] text-white" style="min-height: 450px;">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-24 items-start" style="min-height: 280px;">
          <div style="min-height: 160px;">
            <h2 id="team-heading-da" class="text-4xl sm:text-5xl lg:text-6xl font-black mb-6 sm:mb-8 leading-tight" style="min-height: 120px; display: flex; align-items: center;">
              <span></span>
            </h2>
          </div>
          <div>
            <h3 class="text-2xl font-bold mb-4">
              Accelerér jeres fremgang<br />med AI ekspertise
            </h3>
            <p class="text-gray-300 mb-6">
              SAIBAs erfarne team af AI specialister og teknologer
              accelererer jeres AI rejse gennem målrettet rådgivning og
              implementering af AI løsninger der skaber potentiale for jeres
              forretning.
            </p>
            <button
              id="show-team-btn"
              class="inline-flex items-center text-white hover:text-gray-200 transition-all duration-300"
            >
              <span class="mr-2">TEAM</span>
              <svg id="team-arrow" class="w-4 h-4 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </button>
          </div>
        </div>

        <!-- Team Cards -->
        <div id="team-cards" class="hidden mt-16">
          <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 md:gap-6 items-stretch">
            <TeamCard
              id="gustav-da"
              name="Gustav Friis"
              image={`${base}/images/team/gustav.jpg`}
              details="Gustav har arbejdet med blockchain og open-source teknologi siden 2016 og har bidraget til projekter som BrainBot (Ethereum), Linkdrop og NEAR Foundation. Han kombinerer dyb teknisk indsigt med erfaring inden for produktstrategi og forretningsudvikling i internationale miljøer. Hos SAIBA leder Gustav den tekniske og strategiske udvikling med fokus på, hvordan AI og ny teknologi kan omsættes til løsninger, der skaber målbar værdi for virksomheder og organisationer."
              linkedin="https://www.linkedin.com/in/gustav-friis-20201086/"
            />
            <TeamCard
              id="peter-da"
              name="Peter Humaidan"
              image={`${base}/images/team/peter.jpg`}
              details="Peter har arbejdet med blockchain, AI og digitale produkter siden 2021 og har været en central del af NEAR-økosystemet – først i NEAR Foundation og siden som stifter af NEARWEEK. Han har solid erfaring med produktudvikling, strategi og positionering samt i at bygge bro mellem teknologi, brand og brugeroplevelse. Hos SAIBA arbejder Peter med forretningsstrategi og produktretning med fokus på at forene teknologisk innovation med klare kommunikations- og markedsmål."
              linkedin="https://www.linkedin.com/in/jp-al-humaidan/"
            />
            <TeamCard
              id="frederik-da"
              name="Frederik Hansson"
              image={`${base}/images/team/frederik.jpg`}
              details="Frederik har arbejdet med blockchain og AI siden 2020 og kombinerer kreativ tænkning med en strategisk forståelse for, hvordan teknologi kan styrke forretning og organisation. Han har mere end ti års erfaring fra modebranchen, herunder som COO for Revolver Trade Show. Hos SAIBA arbejder Frederik med strategi, udvikling og ledelse med fokus på, at teknologi implementeres med tydelig retning, effekt og forretningsmæssig værdi."
              linkedin="https://www.linkedin.com/in/frederikhansson/"
            />
            <TeamCard
              id="jens-da"
              name="Jens Jepsen"
              image={`${base}/images/team/jens.jpg`}
              details="Jens har en baggrund som snedker og kunsthistoriker og har siden 2021 arbejdet med blockchain og AI – særligt inden for marketing, design og regenerative AI-projekter. Han forener håndværksmæssig præcision med kreativ forståelse og evnen til at omsætte idéer til klare visuelle koncepter. Hos SAIBA arbejder Jens med konceptudvikling, visuel retning og anvendelsen af AI i kreative og kommunikative processer."
              linkedin="https://www.linkedin.com/in/jens-jepsen-5664a9240/"
            />
          </div>
        </div>
      </div>
    </section>

    <!-- Gradient Grid Background for bottom sections -->
    <div class="relative overflow-hidden">
      <!-- Subtle Grid Background (mirrored) -->
      <div class="absolute inset-0 opacity-50" style="mask-image: linear-gradient(to top, transparent 0%, black 10%, black 90%, transparent 100%);">
        <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="grid-bottom" width="40" height="40" patternUnits="userSpaceOnUse">
              <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(0,0,0,0.15)" stroke-width="1"/>
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#grid-bottom)" />
        </svg>
      </div>
      
      <GradientGridBackground />
      
      <!-- Partner Logos -->
      <section id="clients" class="relative z-10">
        <PartnerLogos />
      </section>

      <!-- Contact Form -->
      <section id="contact" class="relative z-10">
        <ContactForm />
      </section>
    </div>
  </main>

  <Footer />
</BaseLayout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const showTeamBtn = document.getElementById("show-team-btn");
    const teamCards = document.getElementById("team-cards");
    const teamArrow = document.getElementById('team-arrow');
    
    showTeamBtn?.addEventListener("click", () => {
      if (teamCards && teamArrow) {
        if (teamCards.classList.contains("hidden")) {
          teamCards.classList.remove("hidden");
          teamCards.classList.add("animate-fade-in");
          teamArrow.classList.add('rotate-180');
        } else {
          teamCards.classList.add("hidden");
          teamCards.classList.remove("animate-fade-in");
          teamArrow.classList.remove('rotate-180');
        }
      }
    });

    // Mobile team card expansion
    document.addEventListener('click', (e) => {
      const button = (e.target as HTMLElement).closest('.team-expand-btn');
      if (!button) return;
      
      const cardId = button.getAttribute('data-target');
      if (!cardId) return;
      
      const detailsContainer = document.querySelector(`[data-details="${cardId}"] .lg\\:hidden`) as HTMLElement;
      const arrow = button.querySelector('.team-arrow') as HTMLElement;
      
      if (!detailsContainer || !arrow) return;
      
      const isExpanded = detailsContainer.style.maxHeight !== '0px' && detailsContainer.style.maxHeight !== '';
      
      if (isExpanded) {
        // Collapse
        detailsContainer.style.maxHeight = '0px';
        detailsContainer.style.opacity = '0';
        arrow.classList.remove('rotate-180');
        button.setAttribute('aria-expanded', 'false');
      } else {
        // Expand
        detailsContainer.style.maxHeight = detailsContainer.scrollHeight + 'px';
        detailsContainer.style.opacity = '1';
        arrow.classList.add('rotate-180');
        button.setAttribute('aria-expanded', 'true');
        
        // Set to auto after animation
        setTimeout(() => {
          if (detailsContainer.style.opacity === '1') {
            detailsContainer.style.maxHeight = 'auto';
          }
        }, 300);
      }
    });

    // Scroll reveal functionality
    const observerOptions = {
      threshold: 0.1,
      rootMargin: "0px 0px -50px 0px",
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("revealed");
        }
      });
    }, observerOptions);

    // Add reveal classes and observe elements
    const sections = document.querySelectorAll("section");
    sections.forEach((section, index) => {
      if (index > 0) {
        // Skip hero section
        section.classList.add("reveal");
        observer.observe(section);
      }
    });

    // Observe service cards individually
    const serviceCards = document.querySelectorAll(".grid .inline-flex");
    serviceCards.forEach((card, index) => {
      card.classList.add("reveal");
      (card as HTMLElement).style.transitionDelay = `${index * 0.1}s`;
      observer.observe(card);
    });

    // Typewriter effect for team heading
    const teamHeading = document.getElementById('team-heading-da');
    if (teamHeading) {
      const originalText = 'Vi identificerer jeres\nAI potentiale';
      const span = teamHeading.querySelector('span');
      if (span) {
        span.innerHTML = '';
        
        const typewriterObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              let index = 0;
              const typeInterval = setInterval(() => {
                if (index < originalText.length) {
                  const char = originalText[index];
                  if (char === '\n') {
                    span.innerHTML += '<br>';
                  } else {
                    span.innerHTML += char;
                  }
                  index++;
                } else {
                  clearInterval(typeInterval);
                }
              }, 80); // 80ms per character
              typewriterObserver.unobserve(entry.target);
            }
          });
        }, { threshold: 0.5 });
        
        typewriterObserver.observe(teamHeading);
      }
    }
  });
</script>